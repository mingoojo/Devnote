# 3.MSW

### 학습 키워드

* Service worker
* MSW(Mock Service Worker)
* polyfill(폴리필)

## MSW(Mock Service Worker)

> **네트워크를 통해 외부로부터 받아오는 자료(express.js) 등을 테스트의 목적으로 가상으로 구현하는 것**

{% embed url="https://mswjs.io" %}

React Testing Library에서 사용한 `fireEvent`나, `jest.mock`, `jest.fn()`등은 코드 레벨에서 가상의 이벤트나 함수를 구현하는 것이었다면, MSW는 네트워크단위에서 가상의 자료를 만드는 것을 의미한다.

### MSW 패키지 설치

```
npm i -D msw
```

* jest.config.js 파일 수정&#x20;

jest.config.js의 setupFilesAfterEnv부분에 코드를 추가한다.

```javascript
'<rootDir>/src/setupTests.ts', 를 추가!!

setupFilesAfterEnv: [
  '@testing-library/jest-dom/extend-expect',
  '<rootDir>/src/setupTests.ts',
],
```

* \<rootDir>/src/에 경로에 seTupTests.ts파일을 만들어준다

```typescript
// src/setUpTests.ts

import server from './mocks/server';

beforeAll(() => server.listen({ onUnhandledRequest: 'error' }));

afterAll(() => server.close());

afterEach(() => server.resetHandlers());
```

* \<rootDir>/src/mocks에 server.ts파일을 생성해준다.

```typescript
//src/mocks/server.ts

import { setupServer } from 'msw/node';

import handlers from './handlers';

const server = setupServer(...handlers);

export default server;
```

## Service worker



## polyfill(폴리필)
